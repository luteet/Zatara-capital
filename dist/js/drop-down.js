export default function dropDown(){const t=document.querySelectorAll(".drop-down"),e=document.querySelector(".wrapper"),s=()=>{const t=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)?"mobile":"desktop"};let o=[],i=s();function r(t,s,i,r){if(!t.classList.contains("is-animating")){t.classList.add("is-animating"),s.style.maxWidth=i.offsetWidth+"px";let a=s.offsetHeight,n=s.offsetWidth,l={y:i.getBoundingClientRect().top+window.scrollY,x:i.getBoundingClientRect().left+window.scrollX};s.classList.contains("is-active")||t.closest(".drop-down.is-active")?"click"==r&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),i.classList.remove("is-active"),setTimeout(()=>{i.classList.contains("is-active")||(s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),t.classList.remove("is-animating"))},300)):(Array.from(o).forEach(t=>{const e=t.target,s=t.block,o=t.wrapper;o.classList.contains("is-active")&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating")},300))}),s.style.display="none",l.x>=n&&l.x<window.innerWidth-n?s.classList.contains("on-right-mode")?(s.style.left=l.x+t.offsetWidth+"px",s.style.transform="translate3d(-100%,0,0)"):(s.style.left=l.x+t.offsetWidth/2+"px",s.style.transform="translate3d(-50%,0,0)"):l.x+15>window.innerWidth-n?(s.style.left=l.x-n+t.offsetWidth+"px",s.style.transform="translate3d(0,0,0)"):l.x<=n&&(s.style.left=l.x+"px",s.style.transform="translate3d(0,0,0)"),t.getBoundingClientRect().bottom+a>=window.innerHeight?(s.style.top=l.y-a+"px",s.classList.remove("on-bottom"),s.classList.add("on-top")):t.getBoundingClientRect().bottom+a<e.offsetHeight&&(s.style.top=l.y+t.offsetHeight+"px",s.classList.remove("on-top"),s.classList.add("on-bottom")),s.style.removeProperty("display"),i.classList.add("is-active"),s.classList.add("fade-in"),t.classList.remove("is-animating"))}}t.forEach(t=>{const e=t.querySelector(".drop-down__target"),s=t.querySelector(".drop-down__block");o.push({wrapper:t,target:e,block:s}),document.body.append(s)}),Array.from(o).forEach(t=>{const e=t.target,s=t.block,o=t.wrapper;e.addEventListener("click",(function(){r(e,s,o,"click")})),o.classList.contains("hover-mode")&&(e.addEventListener("mouseenter",(function(){"desktop"==i&&r(e,s,o,"hover")})),e.addEventListener("mouseleave",(function(t){t.toElement.closest(".drop-down__block")||"desktop"!=i||(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{o.classList.contains("is-active")||(s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating"))},300))})),s.addEventListener("mouseleave",(function(t){!t.toElement.closest(".drop-down__target")&&s.classList.contains("fade-in")&&"desktop"==i&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{o.classList.contains("is-active")||(s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating"))},300))})))}),window.addEventListener("resize",(function(){i=s(),Array.from(o).forEach(t=>{const s=t.target,o=t.block,i=t.wrapper;if(o.classList.contains("is-active")){let t=list.offsetHeight,r=list.offsetWidth,a={y:i.getBoundingClientRect().top+window.scrollY,x:i.getBoundingClientRect().left+window.scrollX};a.x>=r&&a.x<window.innerWidth-r?(o.style.left=a.x+s.offsetWidth/2+"px",o.style.transform="translate3d(-50%,0,0)"):a.x+15>window.innerWidth-r?(o.style.left=a.x-r+s.offsetWidth+"px",o.style.transform="translate3d(0,0,0)"):a.x<=r&&(o.style.left=a.x+"px",o.style.transform="translate3d(0,0,0)"),s.getBoundingClientRect().bottom+t>=window.innerHeight?o.style.top=a.y-t-9+"px":s.getBoundingClientRect().bottom+t<e.offsetHeight&&(o.style.top=a.y+s.offsetHeight+9+"px")}})})),document.body.addEventListener("click",(function(t){t.target.closest(".drop-down")||Array.from(o).forEach(t=>{const e=t.target,s=t.block,o=t.wrapper;o.classList.contains("is-active")&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating")},300))})}))}