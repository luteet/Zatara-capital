export default function dropDown(){const t=document.querySelectorAll(".drop-down"),e=document.querySelector(".wrapper")?document.querySelector(".wrapper"):document.querySelector(".account-wrapper"),s=()=>{const t=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)?"mobile":"desktop"};let o=[],i=s();function a(t,s,i,a){if(!t.classList.contains("is-animating")){t.classList.add("is-animating"),s.style.maxWidth=i.offsetWidth+"px";let n=s.offsetHeight,r=s.offsetWidth,l={y:i.getBoundingClientRect().top+window.scrollY,x:i.getBoundingClientRect().left+window.scrollX};s.classList.contains("is-active")||t.closest(".drop-down.is-active")?"click"==a&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),i.classList.remove("is-active"),setTimeout(()=>{i.classList.contains("is-active")||(s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),t.classList.remove("is-animating"))},300)):(Array.from(o).forEach(t=>{const e=t.target,s=t.block,o=t.wrapper;o.classList.contains("is-active")&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating")},300))}),s.style.display="none",l.x>=r&&l.x<window.innerWidth-r?s.classList.contains("on-right-mode")?(s.style.left=l.x+t.offsetWidth+"px",s.style.transform="translate3d(-100%,0,0)"):(s.style.left=l.x+t.offsetWidth/2+"px",s.style.transform="translate3d(-50%,0,0)"):l.x+15>window.innerWidth-r?(s.style.left=l.x-r+t.offsetWidth+"px",s.style.transform="translate3d(0,0,0)"):l.x<=r&&(s.style.left=l.x+"px",s.style.transform="translate3d(0,0,0)",s.classList.contains("aside-mode")&&(s.style.left=l.x+document.querySelector(".account-aside").offsetWidth+"px",s.style.transform="translate3d(0%,0,0)")),t.getBoundingClientRect().bottom+n>=window.innerHeight?(s.classList.contains("aside-mode"),s.style.top=l.y-n+"px",s.classList.remove("on-bottom"),s.classList.add("on-top")):t.getBoundingClientRect().bottom+n<e.offsetHeight&&(s.classList.contains("aside-mode")?(s.style.top=l.y+"px",s.classList.remove("on-top"),s.classList.add("on-bottom")):(s.style.top=l.y+t.offsetHeight+"px",s.classList.remove("on-top"),s.classList.add("on-bottom"))),s.style.removeProperty("display"),i.classList.add("is-active"),s.classList.add("fade-in"),t.classList.remove("is-animating"))}}function n(){i=s(),Array.from(o).forEach(t=>{const s=t.target,o=t.block,i=t.wrapper;if(i.classList.contains("is-active")){let t=o.offsetHeight,a=o.offsetWidth,n={y:i.getBoundingClientRect().top+window.scrollY,x:i.getBoundingClientRect().left+window.scrollX};n.x>=a&&n.x<window.innerWidth-a?o.classList.contains("on-right-mode")?(o.style.left=n.x+s.offsetWidth+"px",o.style.transform="translate3d(-100%,0,0)"):o.classList.contains("on-left-mode")?(o.style.left=n.x+s.offsetWidth+"px",o.style.transform="translate3d(0%,0,0)"):(o.style.left=n.x+s.offsetWidth/2+"px",o.style.transform="translate3d(-50%,0,0)"):n.x+15>window.innerWidth-a?o.classList.contains("on-left-mode")?(o.style.left=n.x+s.offsetWidth+"px",o.style.transform="translate3d(0,0,0)"):(o.style.left=n.x-a+s.offsetWidth+"px",o.style.transform="translate3d(0,0,0)"):n.x<=a&&(o.style.left=n.x+"px",o.style.transform="translate3d(0,0,0)",o.classList.contains("aside-mode")&&(o.style.left=n.x+document.querySelector(".account-aside").offsetWidth+"px",o.style.transform="translate3d(0%,0,0)")),s.getBoundingClientRect().bottom+t>=window.innerHeight?(o.classList.contains("aside-mode"),o.style.top=n.y-t+"px",o.classList.remove("on-bottom"),o.classList.add("on-top")):s.getBoundingClientRect().bottom+t<e.offsetHeight&&(o.classList.contains("aside-mode")?(o.style.top=n.y+"px",o.classList.remove("on-top"),o.classList.add("on-bottom")):(o.style.top=n.y+s.offsetHeight+"px",o.classList.remove("on-top"),o.classList.add("on-bottom")))}})}t.forEach(t=>{const e=t.querySelector(".drop-down__target"),s=t.querySelector(".drop-down__block");o.push({wrapper:t,target:e,block:s}),document.body.append(s)}),Array.from(o).forEach(t=>{const e=t.target,s=t.block,o=t.wrapper;e.addEventListener("click",(function(){a(e,s,o,"click")})),o.classList.contains("hover-mode")&&(e.addEventListener("mouseenter",(function(){"desktop"==i&&a(e,s,o,"hover")})),e.addEventListener("mouseleave",(function(t){t.toElement.closest(".drop-down__block")||"desktop"!=i||(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{o.classList.contains("is-active")||(s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating"))},300))})),s.addEventListener("mouseleave",(function(t){!t.toElement.closest(".drop-down__target")&&s.classList.contains("fade-in")&&"desktop"==i&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{o.classList.contains("is-active")||(s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating"))},300))})))}),window.addEventListener("resize",n),window.addEventListener("scroll",n),document.querySelector(".account-main")&&document.querySelector(".account-main").addEventListener("scroll",n),document.body.addEventListener("click",(function(t){t.target.closest(".drop-down")||Array.from(o).forEach(t=>{const e=t.target,s=t.block,o=t.wrapper;o.classList.contains("is-active")&&(s.classList.remove("fade-in"),s.classList.add("fade-out"),o.classList.remove("is-active"),setTimeout(()=>{s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("transform"),s.classList.remove("fade-out"),e.classList.remove("is-animating")},300))})}))}