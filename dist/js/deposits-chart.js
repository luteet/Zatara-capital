export default function depositsChart(){function t(t){let e=t.getBoundingClientRect();return{top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX}}const e=e=>{const{chart:a,tooltip:o}=e,s=(t=>{let e=document.querySelector(`[data-tooltip-for="${t.canvas.dataset.id}"]`);return e||(e=document.createElement("div"),e.classList.add("chart-tooltip"),e.setAttribute("data-tooltip-for",t.canvas.dataset.id),e.style.opacity=1,document.body.appendChild(e)),e})(a);if(0===o.opacity)return void(s.style.opacity=0);if(o.body){const t=o.body.map(t=>t.lines);s.innerHTML="",t.forEach((t,e)=>{if(o.dataPoints[0].raw.metavalue){let t="";"success"==o.dataPoints[0].raw.mode&&(t=" success-color"),"failure"==o.dataPoints[0].raw.mode&&(t=" failure-color"),"failure"==o.dataPoints[0].raw.mode&&(t=" failure-color"),s.insertAdjacentHTML("beforeend",`<div class="chart-tooltip__metavalue${t}">${o.dataPoints[0].raw.metavalue}</div>`)}s.insertAdjacentHTML("beforeend",`\n\t\t\t\t<div class="chart-tooltip__footer">\n\t\t\t\t\t${a.canvas.closest(".deposits__chart").dataset.tooltipFooter}\n\t\t\t\t\t<b>${o.dataPoints[0].formattedValue.toLocaleString("ru")} ${o.dataPoints[0].dataset.after}</b>\n\t\t\t\t</div>`)})}const{offsetLeft:i,offsetTop:r}=a.canvas;s.style.opacity=1,s.style.left=t(a.canvas).left+o.caretX+"px",s.style.top=t(a.canvas).top+o.caretY+"px",s.style.font=o.options.bodyFont.string,s.style.padding=o.options.padding+"px "+o.options.padding+"px"};function a(t){let e=[];return t.data.map(t=>e.push({label:t.name,data:t.data,fill:!0,borderColor:"rgba(75, 192, 192, 0)",pointBackgroundColor:t.gradient[1],pointRadius:0,pointHoverRadius:7,pointBorderWidth:7,pointBorderColor:"#FFF",hoverBorderWidth:7,hidden:t.hidden,after:t.after?t.after:"",backgroundColor:function(e){const a=e.chart,{ctx:o,chartArea:s}=a;if(s)return function(t,e,a,o){const s=e.right-e.left,i=e.bottom-e.top;let r,l,n;return n&&r===s&&l===i||(r=s,l=i,n=t.createLinearGradient(0,e.bottom,0,e.top),n.addColorStop(0,a),n.addColorStop(1,o)),n}(o,s,t.gradient[0],t.gradient[1])},tension:.5})),{labels:t.labels,datasets:e}}let o=[];document.querySelectorAll(".deposits__chart canvas").forEach((t,s)=>{const i=t.getContext("2d");if(dataObj[s]){const t={type:"line",data:a(dataObj[s]),options:{responsive:!0,parsing:{yAxisKey:"value",xAxisKey:"value"},interaction:{intersect:!1},animation:!1,plugins:{tooltip:{enabled:!1,position:"nearest",external:e},legend:{display:!1}},scales:{x:{grid:{color:"light"==localStorage.getItem("zatara-capital-theme")?"#EBEBEB":"#102140"}},y:{grid:{color:"light"==localStorage.getItem("zatara-capital-theme")?"#EBEBEB":"#102140"},ticks:{callback:function(t,e,a){return""}}}}}};o.push(new Chart(i,t))}}),document.querySelectorAll(".deposits__legends_button").forEach((t,e)=>{const a=t.parentElement.querySelectorAll(".deposits__legends_button").length;t.addEventListener("click",()=>{t.classList.contains("is-active")||(t.parentElement.querySelectorAll(".deposits__legends_button").forEach(t=>t.classList.remove("is-active")),t.classList.add("is-active"),o.map(t=>{for(let o=0;o<a;o++)o==e?t.setDatasetVisibility(o,!0):t.setDatasetVisibility(o,!1);t.update()}))})}),document.querySelectorAll(".deposits__sort_button").forEach((t,e)=>{t.addEventListener("click",()=>{t.classList.contains("is-active")||(t.closest(".deposits").querySelector(".deposits__chart_block.is-active").classList.remove("is-active"),t.closest(".deposits").querySelectorAll(".deposits__chart_block")[e].classList.add("is-active"),t.parentElement.querySelector(".deposits__sort_button.is-active").classList.remove("is-active"),t.classList.add("is-active"))})}),document.documentElement.addEventListener("theme-change",()=>{o.map(t=>{t.options.scales.y.grid.color="light"==localStorage.getItem("zatara-capital-theme")?"#EBEBEB":"#102140",t.options.scales.x.grid.color="light"==localStorage.getItem("zatara-capital-theme")?"#EBEBEB":"#102140",t.update()})})}